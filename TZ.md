# Техническое задание на систему аренды самокатов "TheCheapskateScooters"

## 1. Введение

### 1.1. Назначение системы
Веб-приложение для аренды тематических самокатов с уникальным дизайном. Система позволяет пользователям находить доступные самокаты на интерактивной карте, арендовать их и управлять своими арендами.

### 1.2. Текущее состояние проекта
Разработан рабочий прототип MVP с полным циклом аренды. Система находится в рабочем состоянии и готова к демонстрации.

## 2. Архитектура проекта

### 2.1. Технологический стек
- **Бэкенд**: Django 4.2+
- **Фронтенд**: Django Templates + JavaScript + Яндекс.Карты API
- **База данных**: SQLite (разработка), PostgreSQL (продакшн-готовность)
- **API**: Django View-based RESTful endpoints с JSON ответами
- **Аутентификация**: Стандартная Django Session Authentication

## 3. Реализованная функциональность

### 3.1. Модели данных ✅
- **User** - стандартная модель Django с расширенными возможностями
- **ScooterPoint** - точки аренды самокатов (название, адрес, координаты)
- **Scooter** - самокаты (модель, статус доступности, привязка к точке)
- **Rental** - записи об арендах (пользователь, самокат, время начала/окончания)

### 3.2. Аутентификация и авторизация ✅
- Регистрация новых пользователей
- Вход/выход из системы
- Сессионная аутентификация

### 3.3. Основной веб-интерфейс ✅

#### 3.3.1. Интерактивная карта
- Отображение всех точек аренды на Яндекс.Картах
- Динамическая загрузка адресов через геокодирование

#### 3.3.2. Сайдбар с точками аренды
- Список всех точек с самокатами
- Отображение статистики по каждой точке
- Возможность навигации к точке на карте
- Переход к детальной информации о точке

### 3.4. API для аренды ✅

#### 3.4.1. Аренда самоката
- **Метод**: POST `/api/rent/<scooter_id>/`
- **Функционал**: 
  - Проверка доступности самоката
  - Создание записи об аренде
  - Обновление статуса самоката
  - Фиксация координат начала аренды

#### 3.4.2. Отмена аренды
- **Метод**: POST `/api/de-rent/<rental_id>/`
- **Функционал**:
  - Проверка прав пользователя на отмену
  - Завершение аренды с отметкой времени
  - Освобождение самоката

## 4. Бизнес-процессы (реализованы)

### 4.1. Процесс "Поиск и аренда самоката" ✅
1. Пользователь заходит на главную страницу с картой
2. Система показывает все точки аренды с индикацией доступности
3. Пользователь выбирает точку (клик на карте или в сайдбаре)
4. Открывается балун с информацией о точке
5. Пользователь нажимает "Перейти к точке"
6. На странице точки пользователь видит список самокатов
7. Пользователь выбирает доступный самокат и нажимает "Арендовать"
8. Система создает запись об аренде и меняет статус самоката

### 4.2. Процесс "Управление арендами" ✅
1. Пользователь переходит в раздел аренд
2. Видит список своих активных и завершенных аренд
3. Для активной аренды может:
   - Отменить аренду
   - Просмотреть детали аренды

## 5. Технические особенности реализации

### 5.1. Работа с Яндекс.Картами ✅
- Динамическая загрузка API карт
- Автоматическое геокодирование координат в адреса
- Оптимизация отображения большого количества точек
- Интерактивные балуны с кастомным HTML содержимым

## 5. Пользовательские роли и права доступа

### 6.1. Клиент
- Регистрация и аутентификация
- Просмотр точек аренды и самокатов
- Аренда и управление своими арендами
- Просмотр истории аренд

### 6.2. Администратор
- Управление пользователями
- Управление точками аренды и самокатами
- Просмотр всех аренд и отчетов

### 7. Ограничения проекта

**7.1. Технические ограничения**
- Первая версия - только веб-интерфейс (без мобильных приложений)
- Отсутствие интеграции с платежными системами в MVP

**7.2. Бизнес-ограничения MVP**
- Ручная модерация контента (дизайнов самокатов)
