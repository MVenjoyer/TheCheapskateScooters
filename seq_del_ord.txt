@startuml
title Процесс отмены аренды

actor Пользователь
participant "Веб-интерфейс" as UI
participant "API Сервер" as API
database "База данных" as DB

== 1. Просмотр активных аренд ==
Пользователь -> UI : Переход в "Мои аренды"
UI -> API : Запрос активных аренд пользователя
API -> DB : Поиск аренд пользователя
DB -> API : Список активных аренд
API -> UI : Данные об арендах
UI -> Пользователь : Отображение списка аренд

== 2. Отмена аренды ==
Пользователь -> UI : Нажимает "Отменить" у аренды
UI -> API : POST /api/de-rent/<rental_id>/
API -> DB : Поиск аренды
DB -> API : Данные аренды

API -> DB : Завершение аренды\n(установка end_time)
API -> DB : Освобождение самоката\n(is_available = True)

note right of API
Аренда переходит
в историю аренд
end note

API -> UI : Ответ: успешно
UI -> Пользователь : "Аренда отменена"

== 3. Обновление интерфейса ==
UI -> UI : Удаление из списка активных аренд
UI -> UI : Автоматическое обновление интерфейса

note over UI, API
Отмененная аренда остается
в базе данных с end_time
и доступна в истории аренд
end note

@enduml